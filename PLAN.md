# Daymon - 게임 개발 로드맵

## 현재 상태 (2026-02)

### 완성된 기능
- Supabase 인증 (이메일/비밀번호 로그인, 닉네임 시스템)
- Luna 화폐 시스템
- 알 부화 시스템 (7속성, 24시간 부화, 5단 부화장치 캐러셀)
- 필드 몬스터 돌봄 (배고픔/행복도/EXP 게이지, 간식/놀기)
- 안식처 보관 (6슬롯)
- 출석체크 (7일 주기 보상)
- 효과음 + 탭별 BGM
- 모바일 최적화 UI (9:16, 430px, 노치 대응)

### 최근 완료한 작업
- App.jsx 상태 관리 분리 (1965줄 → 418줄)
  - `src/constants/gameConfig.js` — 게임 상수
  - `src/utils/gameHelpers.js` — 유틸 함수
  - `src/hooks/useAuth.js` — 인증
  - `src/hooks/useGameData.js` — 게임 데이터 + 자동저장
  - `src/hooks/useIncubator.js` — 부화장치
  - `src/hooks/useFieldMonster.js` — 필드 몬스터
  - `src/hooks/useAttendance.js` — 출석체크
  - `src/components/EggTab.jsx` — 알 탭
  - `src/components/FieldTab.jsx` — 필드 탭
  - `src/components/SanctuaryTab.jsx` — 안식처 탭
  - `src/components/GameModals.jsx` — 모달 모음

### 미완성 / TODO
- 몬스터 이미지: Fire만 존재, 나머지 6속성 fallback
- BGM 볼륨 슬라이더 미연결
- 프로필 사진 기능 미구현
- 친구 시스템 (UI만 "준비 중")
- 도감 시스템 (UI만 "준비 중")
- 네트워크 에러 시 토스트 알림 없음

---

## 몬스터 시스템 설계

### 방향: 단일 종족(데이몬) + 파츠 조합 변이

실제 동물 여러 종이 아닌, **하나의 데이몬 종족**에 파츠를 조합해 개체 다양성을 만든다.

#### 파츠 레이어 구조

```
┌─────────────────────┐
│  뿔/귀  (레이어 5)    │  ← 4종 (없음, 작은뿔, 큰뿔, 토끼귀)
│  눈     (레이어 4)    │  ← 5종 (동그란, 날카로운, 졸린, 반짝이, 오드아이)
│  날개   (레이어 3)    │  ← 3종 (없음, 작은, 큰)
│  무늬   (레이어 2)    │  ← 4종 (없음, 줄무늬, 점박이, 별)
│  몸통   (레이어 1)    │  ← 기본 실루엣 1종 (CSS hue-rotate로 속성별 색상)
│  꼬리   (레이어 0)    │  ← 4종 (짧은, 긴, 불꽃, 깃털)
└─────────────────────┘
```

- 필요 에셋: **~20장** (투명 PNG)
- 속성별 색상: CSS `hue-rotate`로 처리 (에셋 추가 없음)
- 가능한 조합: **5 × 4 × 4 × 3 × 4 × 7속성 = 6,720가지**

#### 렌더링 방식

```jsx
<div className="monster" style={{ filter: `hue-rotate(${elementHue}deg)` }}>
  <img src={tailParts[tail]}    className="part part--tail" />
  <img src={bodyBase}           className="part part--body" />
  <img src={patternParts[pattern]} className="part part--pattern" />
  <img src={wingParts[wing]}    className="part part--wing" />
  <img src={eyeParts[eyes]}     className="part part--eyes" />
  <img src={hornParts[horn]}    className="part part--horn" />
</div>
```

#### 속성별 hue-rotate 값

| 속성 | hue-rotate | 기본 색감 |
|------|-----------|-----------|
| Fire | 0deg | 빨강/주황 |
| Water | 200deg | 파랑 |
| Wood | 100deg | 초록 |
| Metal | 240deg | 은빛/회색 |
| Earth | 30deg | 갈색/황토 |
| Light | 50deg | 금색/노랑 |
| Dark | 270deg | 보라/검정 |

---

## 등급(희귀도) 시스템 — 뽑기운의 핵심

### 등급 확률

| 등급 | 확률 | 시각 차이 | 부화 연출 |
|------|------|-----------|-----------|
| Common | 70% | 기본 파츠만 | 심플 |
| Rare | 20% | + 무늬, 날개 가능 | 약간의 빛 |
| Epic | 8% | + 희귀 파츠 (오드아이, 큰날개) | 글로우 효과 |
| Legend | 2% | 모든 파츠 + 전용 컬러 | 파티클 + 후광 + 진동 |

### 핵심 메커니즘

- 알의 **속성은 슬롯에서 미리 보임** (어떤 색 알인지 알 수 있음)
- **등급은 부화 순간에만 공개** → 24시간 기다린 후 두근두근
- 등급별 부화 연출이 달라서 "아, Legend다!" 하는 순간이 있음
- 등급이 높을수록 파츠 풀이 넓어서 시각적으로 화려한 개체

### 부화 시 데이터 구조

```js
{
  element: 'fire',
  rarity: 'epic',
  parts: {
    eyes: 'sparkle',
    horn: 'big',
    tail: 'flame',
    wing: 'small',     // Epic 이상만 가능
    pattern: 'stars',   // Rare 이상만 가능
  }
}
```

### 등급별 파츠 풀

```
Common:  눈(3종) × 뿔(2종) × 꼬리(3종) × 날개(없음) × 무늬(없음)
Rare:    눈(4종) × 뿔(3종) × 꼬리(4종) × 날개(2종) × 무늬(3종)
Epic:    눈(5종) × 뿔(4종) × 꼬리(4종) × 날개(3종) × 무늬(4종)
Legend:  전체 풀 + 전용 컬러 오버레이 + 특수 이펙트
```

---

## 필드 시스템 개선

### 1. 자동 행동 (배고픔/행복도 기반)

파츠 이미지 1세트 + CSS 애니메이션으로 구현. 추가 에셋 없음.

| 행동 | 조건 | CSS 구현 |
|------|------|----------|
| 서있기 (기본) | idle | `transform: scale(1)` |
| 뛰어다니기 | 배고픔 > 70 & 행복 > 70 | `translateX` + `translateY` 반복 |
| 점프 | 행복 > 80 | `translateY(-20%)` keyframe |
| 빙글빙글 | 행복 > 90 | `rotate(360deg)` keyframe |
| 느릿느릿 | 배고픔 < 40 | 이동 속도 느리게 |
| 웅크리기 | 배고픔 < 20 | `scaleY(0.7) translateY(15%)` |
| 잠자기 | 행복 < 20 | `rotate(25deg)` + 눈 `opacity:0` + 💤 |
| 어지러움 | 빠른 연타 시 | 좌우 `rotate(±8deg)` 반복 |

#### 개별 파츠 애니메이션 (항상 동작)

| 파츠 | 애니메이션 | 방식 |
|------|-----------|------|
| 꼬리 | 살랑살랑 흔들기 | `rotate(±15deg)` 반복 |
| 날개 | 퍼덕퍼덕 | `scaleY(0.8~1.2)` 반복 |
| 눈 | 깜빡 | `opacity` 토글, 3초 간격 |

### 2. 탐험 시스템 (핵심 콘텐츠 확장)

부화 대기 중 할 일이 없는 문제를 해결하는 콘텐츠.

```
[탐험 보내기] 버튼 → 2~6시간 후 돌아옴
                    ├── 알 1개 획득 (속성 랜덤)    ← 뽑기 사이클 완성
                    ├── Luna 50~300
                    └── 드물게 희귀 아이템
```

- 몬스터 레벨이 높을수록 좋은 보상, 짧은 탐험 시간
- 필드 몬스터가 탐험 중이면 필드에 "탐험 중..." 표시
- 부화 + 탐험 = 동시에 두 가지 기다리는 재미

### 3. 터치 반응 다양화

| 입력 | 반응 |
|------|------|
| 한번 탭 | 하트 (기존) |
| 빠른 연타 (5회+) | 어지러워하는 리액션 |
| 느리게 쓰다듬 (드래그) | 기분좋은 리액션 |
| 오래 꾹 누르기 (2초+) | 잠들기 |
| 기기 흔들기 | 놀라는 리액션 |

---

## 추가 시스템 (중기)

### 도감 시스템
- 보유했던 모든 개체 기록
- 속성별, 등급별 필터
- 컬렉션 보상 (7속성 Common 모으면 → 특별 보상)
- "준비 중" UI 이미 존재 → 연결만 하면 됨

### Luna 경제 확장

| 소비처 | 비용 | 효과 |
|--------|------|------|
| 부화장치 수리 | 10,000 | 기존 |
| 탐험 시간 단축 | 500 | -1시간 |
| 특별 간식 | 300 | 경험치 2배 |
| 알 직접 구매 | 1,000~5,000 | 속성 지정 가능 |
| 안식처 확장 | 15,000 | +3슬롯 |

### 몬스터 진화 (장기)
- Lv.10 → 1차 진화 (외형 약간 변화, 새 파츠 추가)
- Lv.25 → 2차 진화 (큰 외형 변화)
- 진화 시 에셋: 진화 단계별 몸통 실루엣 추가 (2장)

---

## 개발 우선순위

### Phase 1: 기반 (현재~)
- [x] App.jsx 상태 관리 분리
- [x] 버그 수정 (nickname 컬럼, mood deps, 미사용 import)
- [ ] BGM 볼륨 슬라이더 연결
- [ ] 네트워크 에러 토스트 알림

### Phase 2: 몬스터 시스템
- [ ] 기본 데이몬 실루엣 디자인 (AI 생성 or 직접)
- [ ] 파츠 에셋 제작 (~20장)
- [ ] DB 스키마 확장 (rarity, parts 필드)
- [ ] 파츠 레이어 렌더링 컴포넌트 (`MonsterRenderer`)
- [ ] 부화 시 랜덤 등급 + 파츠 결정 로직
- [ ] 등급별 부화 연출 (Common~Legend)

### Phase 3: 필드 생동감
- [ ] 자동 행동 CSS 애니메이션 (배고픔/행복 기반)
- [ ] 파츠별 개별 애니메이션 (꼬리, 날개, 눈)
- [ ] 터치 반응 다양화

### Phase 4: 콘텐츠 확장
- [ ] 탐험 시스템
- [ ] 도감 시스템
- [ ] Luna 소비처 확대
- [ ] 안식처 확장 구매

### Phase 5: 소셜 + 장기
- [ ] 친구 시스템 (방문, 선물)
- [ ] 몬스터 진화
- [ ] 랭킹
