# 데스크톱·모바일 계정 동기화

같은 ID/비밀번호로 **데스크톱과 모바일에서 같은 진행 상황**을 쓰려면 **API 서버**가 떠 있어야 합니다.

---

## 동작 방식

1. **한 계정당 로그인은 하나만**: 다른 기기에서 같은 계정으로 로그인하면 **이전 기기 연결은 끊깁니다.** (항상 하나의 시점만 유지)
2. **로그인 시**: 서버에 로그인하면 **토큰**을 받고, 이후 저장/불러오기는 **서버 기준**으로 됩니다.
3. **저장 시**: 알·몬스터·안식처 등 변경 시 **로컬 + 서버** 둘 다 저장됩니다.
4. **다른 기기에서 로그인되면**: 끊긴 기기에서는 다음 요청 시 **로그인 화면**으로 돌아갑니다. 다시 로그인하면 최신 데이터를 받습니다.

그래서 **항상 한 곳에서만** 로그인된 상태라 시점이 어긋나지 않습니다.

---

## 사용 방법

### 로컬(개발)

1. **API 서버 실행**  
   `npm run dev:server` (또는 `npm run dev:all`로 프론트+서버 동시 실행)
2. **프론트 실행**  
   `npm run dev`
3. 브라우저에서 **같은 주소**로 접속 (프록시로 `/api` → 서버 연결)

한 번 **시작하기**로 로그인하면 서버에 계정이 생기고, 이후 같은 ID/비밀번호로 **다른 기기(같은 네트워크에서 같은 주소로 접속)**에서 로그인하면 동기화됩니다.

### 배포(다른 사람에게 주소 알려줄 때)

**https://daymon-source.github.io/daymon/** 는 GitHub Pages에 올린 **프론트만** 있는 주소입니다.  
이 주소로 들어온 사람이 **가입/로그인**해서 계정이 남으려면, **API 서버도 인터넷에** 올려야 합니다.

1. **API 서버**를 Railway / Render / Fly.io / 본인 서버 등에 배포해서 **공개 URL**을 얻습니다.  
   예: `https://daymon-api.railway.app`
2. **프론트 빌드 시** 그 API 주소를 넣습니다.  
   ```bash
   VITE_API_URL=https://daymon-api.railway.app npm run build
   ```
3. 빌드된 `dist`를 GitHub Pages에 올립니다 (기존처럼 `/daymon/` 경로로 배포).

이렇게 하면 다른 사람이 **https://daymon-source.github.io/daymon/** 로 접속해도, 가입/로그인한 정보가 **배포한 API 서버**에 저장되고, 다른 기기에서도 같은 ID로 이어서 할 수 있습니다.  
(localhost는 내 PC에서만 접속 가능하므로, 다른 사람에게는 위 공개 주소만 알려주면 됩니다.)

---

## 서버 없을 때

- API 서버에 연결되지 않으면 **로컬(localStorage)만** 사용합니다.
- 이전처럼 **그 기기 안에서만** 진행 상황이 유지되고, 다른 기기와는 동기화되지 않습니다.
