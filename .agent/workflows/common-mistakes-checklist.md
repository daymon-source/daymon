---
description: 반복되는 실수 방지 체크리스트
---

# 반복되는 실수 방지 체크리스트

이 문서는 개발 중 반복적으로 발생했던 실수들을 정리하여, 같은 실수를 반복하지 않도록 돕습니다.

## 🔴 새 필드/속성 추가 시

**문제 사례:** `hatching_started_at` 추가 후 +- 버튼이 작동하지 않음
- **원인:** 조건문에서 `hatching_started_at`이 `null`인 경우를 처리하지 않음
- **해결:** `|| Date.now()` 폴백 추가

**체크리스트:**
- [ ] **모든 사용처 확인**: `grep_search`로 새 필드가 사용되는 모든 곳 검색
- [ ] **null/undefined 처리**: 조건문에서 폴백 값 제공 (`field || defaultValue`)
- [ ] **기존 데이터 고려**: DB에 이미 있는 데이터는 새 필드가 `null`일 수 있음
- [ ] **타입 일관성**: 숫자/문자열/객체 등 타입이 일관되는지 확인
- [ ] **DB 스키마 업데이트**: 필요시 Supabase 컬럼 추가
- [ ] **로드/저장 로직**: `applyMonstersToState`와 `saveMonstersToSupabase` 모두 수정

## 🔴 UI 요소 클릭 안 될 때

**문제 사례:** 알 클릭, +- 버튼 클릭이 안 됨
- **원인 1:** 상위 요소에 `pointer-events: none`
- **원인 2:** z-index가 낮아서 다른 요소에 가려짐
- **원인 3:** 조건문에서 이벤트 핸들러가 실행 안 됨

**디버깅 순서:**
1. [ ] **F12 Elements 탭**: 클릭할 요소를 선택하고 Computed 탭에서 `pointer-events` 확인
2. [ ] **부모 요소 확인**: 상위 요소들의 `pointer-events` 모두 확인
3. [ ] **z-index 확인**: 다른 요소가 위에 겹쳐있는지 확인
4. [ ] **콘솔 로그**: 이벤트 핸들러 내부에 `console.log` 추가하여 실행 여부 확인
5. [ ] **조건문 확인**: 이벤트 핸들러 내부의 조건문이 통과되는지 확인

**해결 패턴:**
- 클릭 가능한 요소: `pointer-events: auto`, `z-index: 100`
- 배경/컨테이너: `pointer-events: none`

## 🔴 CSS 수정 시

**문제 사례:** 모든 `z-index: 5`를 `z-index: 100`으로 변경해버림
- **원인:** 정규식이 너무 광범위함
- **해결:** 특정 클래스만 타겟팅

**체크리스트:**
- [ ] **정확한 타겟**: 수정할 CSS 룰셋을 정확히 특정
- [ ] **영향 범위 확인**: 같은 속성값을 가진 다른 룰셋이 있는지 확인
- [ ] **백업**: `git checkout` 또는 수동 백업
- [ ] **작은 단위로 수정**: 한 번에 하나의 룰셋만 수정

## 🔴 상태 관리 (State) 수정 시

**문제 사례:** `created_at`과 `hatching_started_at` 혼동
- **원인:** 비슷한 이름의 필드를 잘못 사용
- **해결:** 명확한 네이밍과 주석

**체크리스트:**
- [ ] **명확한 네이밍**: 필드 이름이 용도를 명확히 나타내는지 확인
- [ ] **주석 추가**: 각 필드의 용도를 주석으로 명시
- [ ] **불변성 확인**: 특정 필드가 생성 후 변경되면 안 되는지 확인
- [ ] **계산 로직 분리**: derived state는 별도 함수로 분리

## 🔴 추측하지 말고 물어보기

**문제 사례:** 사용자가 원하는 것을 추측하여 잘못된 방향으로 진행
- **원인:** 불확실한 상황에서 추측으로 진행
- **해결:** 명확하지 않으면 사용자에게 질문

**원칙:**
- [ ] **불확실하면 물어보기**: "이렇게 하면 될까요?" 대신 "어떻게 하시겠습니까?"
- [ ] **선택지 제시**: 가능한 옵션들을 나열하고 사용자가 선택하도록
- [ ] **의도 확인**: 사용자의 최종 목표를 먼저 파악

## 🔴 디버깅 시 체계적 접근

**문제 사례:** z-index 문제라고 추측하고 시간 낭비
- **원인:** 증상만 보고 원인을 추측
- **해결:** 체계적으로 원인 추적

**디버깅 순서:**
1. [ ] **증상 정확히 파악**: "안 된다"가 아니라 "클릭 시 아무 반응 없음"
2. [ ] **최근 변경사항 확인**: 언제부터 안 됐는지, 무엇을 바꿨는지
3. [ ] **관련 코드 확인**: 최근 변경한 코드와 관련된 부분 모두 확인
4. [ ] **로그 추가**: `console.log`로 실행 흐름 추적
5. [ ] **가설 검증**: 추측이 아닌 실험으로 확인

## 📝 이 체크리스트 사용법

**새 작업 시작 전:**
1. 관련 섹션 읽기
2. 체크리스트 항목 확인
3. 놓친 부분 없는지 검토

**문제 발생 시:**
1. 해당 섹션의 디버깅 순서 따르기
2. 체계적으로 원인 추적
3. 새로운 패턴 발견 시 이 문서에 추가
